# Repository Structure

**Note:** All folders mentioned here are relative to the root folder `protocol-specs`

The full specification can be found at `api/{module_name}/build/{module_name}.yaml`

This is an autogenerated file created by compiling multiple sets of components namely,

1. Enum: found at `api/{module_name}/components/enum/`
   * These are all the enums used in module specification while creating the module artifact
2. Examples: found at `api/{module_name}/components/examples/`
   * These are the examples created Illustrative use of the specification and embeeded in the yaml
   * Structure `api/{module_name}/components/examples/{api_name}/example_{#}.yaml`
3. Unresolved YAML: found at `api/{module_name}/components/beck_yaml.yaml`

## Diagaram

```


/ (root directory)
|
|--beckn-core-protocol-specs (git submodule to specific beckn inheritated release)
|--api (contains all the api specific details)
|  |--build
|  |  |--build.yaml (Built Single YAML with api specification of the module)
|  |--components (contains all components of the specification)
|  |  |--dictionary (contains all enums used in module)
|  |  |  |--index.yaml (index yaml) 
|  |  |  |  | {Group/Theme/Flow}
|  |  |  |  |  |  content
|  |  |  |  |  |    {API}:
|  |  |  |  |  |      $ref: ./{API}.yaml
|  |  |  |  |  |    {API}:
|  |  |  |  |  |      $ref: ./{API}.yaml
|  |  |  |  |  |    ....
|  |  |  |--{api}.yaml (dictionary yaml)
|  |  |  |  |  content
|  |  |  |  |    {atttribute_path_YAML_FORMAT}:
|  |  |  |  |      - code: ENUM_VALUE1
|  |  |  |  |        description: enum description md format
|  |  |  |  |        reference: links md format
|  |  |  |  |      - code: ENUM_VALUE2
|  |  |  |  |        description: enum description md format
|  |  |  |  |        reference: links md format
|  |  |  |--{api}.yaml (dictionary yaml)
|  |  |  |  |  content
|  |  |  |  |    {atttribute_path_YAML_FORMAT}:
|  |  |  |  |      - code: ENUM_VALUE1
|  |  |  |  |        description: enum description md format
|  |  |  |  |        reference: links md format
|  |  |  |  |      - code: ENUM_VALUE2
|  |  |  |  |        description: enum description md format
|  |  |  |  |        reference: links md format
|  |  |--examples (conatins examples of the APIs)
|  |  |  |--(theme/usecase/base/behaviour/module)
|  |  |  |  |--search (search request examples yaml)
|  |  |  |  |  |--example_0.yaml (example_0 yaml)
|  |  |  |  |  |  |  content
|  |  |  |  |  |  |    summary: Search Ride
|  |  |  |  |  |  |    value:
|  |  |  |  |  |  |        ....object YAML_FORMAT....
|  |  |--tags (contains Tags all tags used in module)
|  |  |  |--{api}.yaml (dictionary yaml)
|  |  |  |  |  content
|  |  |  |  |  {API}:
|  |  |  |  |    {atttribute_path_YAML_FORMAT}:
|  |  |  |  |  |     tags:
|  |  |  |  |  |      - code: TAG_GROUP_TEST1
|  |  |  |  |  |        description: description md format
|  |  |  |  |  |        refrence: refrence links
|  |  |  |  |  |        lists:
|  |  |  |  |  |         - $ref: "tag.yaml#/{tag_group_name}"
|  |  |  |  |  |        ....
|  |  |  |  |  |      ....  
|  |  |  |--tag.yaml (tag yaml) 
|  |  |  |  |  content
|  |  |  |  |     {tag_group_name}:
|  |  |  |  |  |     tags:
|  |  |  |  |  |      - code: TAG_GROUP_TEST1
|  |  |  |  |  |        description: description md format
|  |  |  |  |  |        refrence: refrence links
|  |  |  |  |  |        lists:
|  |  |  |  |  |         - $ref: "tag.yaml#/{tag_name}"
|  |  |  |  |  |        ....
|  |  |  |  |  |      ....  
|  |  |--financial-core-unresolved.yaml (unresolved yaml to build final yaml)
|  |  |  |   changes:
|  |  |  |     - Add module specific examples[if any]
|  |  |  |     - include tags in components section 
|  |  |  |     - include enums in components section 
|  |--docs
|  |  |--Readme.md (Module Introduction & description)
|  |  |--workflow.md (API work flow illuration for business)
|  |  |--attribute.md (Attribute to business terminology mapping)description)
```

The compilation flow is illustrated below

# Setup steps

## Pre-requisite

### Install swagger CLI

- Install the swagger command line tool using ``npm`` (Note: you may need to use root privileges if installing it globally)

```
sudo npm install -g swagger-cli
```

## Generate the resolved OpenAPI illustration viewer file on-demand

- Run the following command[mac]

```
cd ./api/components
./build_util {example_set}
```

- If the command runs successfully, you should see an output like this,

```
Created ../build/build.yaml from ./temp.yaml
Temporary file deleted
```
